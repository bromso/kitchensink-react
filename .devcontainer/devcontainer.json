{
  "name": "Symbiora Dev",
  "dockerComposeFile": ["../docker-compose.dev.yml", "docker-compose.yml"],
  "service": "dev",
  "workspaceFolder": "/app",

  // ===== VS Code Customizations =====
  "customizations": {
    "vscode": {
      // Extensions synced with .vscode/extensions.json
      "extensions": [
        // Essential
        "biomejs.biome",
        "bradlc.vscode-tailwindcss",
        "oven.bun-vscode",
        "Vercel.turbo-vsc",

        // Next.js & React
        "dsznajder.es7-react-js-snippets",

        // TypeScript
        "yoavbls.pretty-ts-errors",

        // GraphQL
        "GraphQL.vscode-graphql",
        "GraphQL.vscode-graphql-syntax",

        // Git
        "eamodio.gitlens",

        // Docker
        "ms-azuretools.vscode-docker",

        // Kubernetes
        "ms-kubernetes-tools.vscode-kubernetes-tools",
        "Tim-Koehler.helm-intellisense",

        // Productivity
        "usernamehw.errorlens",
        "streetsidesoftware.code-spell-checker",
        "christian-kohler.path-intellisense",
        "gruntfuggly.todo-tree",

        // Documentation
        "unifiedjs.vscode-mdx",

        // Config
        "redhat.vscode-yaml",
        "mikestead.dotenv"
      ],

      // Settings synced with .vscode/settings.json
      "settings": {
        // ===== Editor =====
        "editor.defaultFormatter": "biomejs.biome",
        "editor.formatOnSave": true,
        "editor.formatOnPaste": false,
        "editor.tabSize": 2,
        "editor.insertSpaces": true,
        "editor.rulers": [100],
        "editor.bracketPairColorization.enabled": true,
        "editor.guides.bracketPairs": true,
        "editor.stickyScroll.enabled": true,
        "editor.linkedEditing": true,
        "editor.inlineSuggest.enabled": true,
        "editor.quickSuggestions": { "strings": "on" },
        "editor.codeActionsOnSave": {
          "quickfix.biome": "explicit",
          "source.organizeImports.biome": "explicit"
        },

        // ===== Files =====
        "files.autoSave": "onFocusChange",
        "files.associations": {
          "*.css": "tailwindcss",
          "*.mdx": "mdx",
          ".env*": "dotenv",
          "turbo.json": "jsonc",
          "biome.json": "jsonc"
        },

        // ===== TypeScript =====
        "typescript.tsdk": "node_modules/typescript/lib",
        "typescript.enablePromptUseWorkspaceTsdk": true,
        "typescript.preferences.importModuleSpecifier": "non-relative",
        "typescript.suggest.autoImports": true,
        "typescript.updateImportsOnFileMove.enabled": "always",

        // ===== Tailwind CSS =====
        "tailwindCSS.experimental.classRegex": [
          ["cva\\(([^)]*)\\)", "[\"'`]([^\"'`]*).*?[\"'`]"],
          ["cx\\(([^)]*)\\)", "(?:'|\"|`)([^']*)(?:'|\"|`)"],
          ["cn\\(([^)]*)\\)", "[\"'`]([^\"'`]*).*?[\"'`]"],
          ["clsx\\(([^)]*)\\)", "[\"'`]([^\"'`]*).*?[\"'`]"]
        ],
        "tailwindCSS.includeLanguages": {
          "typescript": "javascript",
          "typescriptreact": "javascript"
        },
        "tailwindCSS.emmetCompletions": true,

        // ===== Emmet =====
        "emmet.includeLanguages": {
          "javascript": "javascriptreact",
          "typescript": "typescriptreact",
          "mdx": "html"
        },
        "emmet.triggerExpansionOnTab": true,

        // ===== Git =====
        "git.autofetch": true,
        "git.enableSmartCommit": true,
        "git.confirmSync": false,

        // ===== Package Manager =====
        "npm.packageManager": "bun",

        // ===== Terminal (container-specific) =====
        "terminal.integrated.defaultProfile.linux": "bash",

        // ===== Language-Specific Formatters =====
        "[json]": { "editor.defaultFormatter": "biomejs.biome" },
        "[jsonc]": { "editor.defaultFormatter": "biomejs.biome" },
        "[javascript]": { "editor.defaultFormatter": "biomejs.biome" },
        "[javascriptreact]": { "editor.defaultFormatter": "biomejs.biome" },
        "[typescript]": { "editor.defaultFormatter": "biomejs.biome" },
        "[typescriptreact]": { "editor.defaultFormatter": "biomejs.biome" },
        "[markdown]": { "editor.wordWrap": "on" },
        "[yaml]": { "editor.defaultFormatter": "redhat.vscode-yaml" },

        // ===== Explorer =====
        "explorer.fileNesting.enabled": true,
        "explorer.fileNesting.expand": false,
        "explorer.fileNesting.patterns": {
          "package.json": "bun.lock, package-lock.json, yarn.lock, .npmrc",
          "tsconfig.json": "tsconfig.*.json",
          "next.config.ts": "next-env.d.ts, middleware.ts",
          ".env": ".env.*, .env.local, .env.development, .env.production",
          "README.md": "CLAUDE.md, CONTRIBUTING.md, LICENSE"
        }
      }
    }
  },

  // ===== Port Forwarding =====
  "forwardPorts": [3000, 3001, 3002, 3003, 6006],
  "portsAttributes": {
    "3000": { "label": "WWW (Marketing)", "onAutoForward": "notify" },
    "3001": { "label": "App (Dashboard)", "onAutoForward": "notify" },
    "3002": { "label": "Legal", "onAutoForward": "silent" },
    "3003": { "label": "Docs", "onAutoForward": "silent" },
    "6006": { "label": "Storybook", "onAutoForward": "notify" }
  },

  // ===== Lifecycle Commands =====
  // Dependencies already installed in Dockerfile as bun user
  "postCreateCommand": "cd packages/tokens && bun run build && cd ../../apps/docs && bun run postinstall && cd ../legal && bun run postinstall",
  "postStartCommand": "git config --global --add safe.directory /app",

  // ===== Features =====
  "features": {
    "ghcr.io/devcontainers/features/git:1": {},
    "ghcr.io/devcontainers/features/github-cli:1": {},
    "ghcr.io/devcontainers/features/docker-in-docker:2": {
      "moby": false,
      "dockerDashComposeVersion": "v2"
    },
    "ghcr.io/devcontainers/features/kubectl-helm-minikube:1": {
      "kubectl": "latest",
      "helm": "latest",
      "minikube": "none"
    },
    "ghcr.io/rio/features/k3d:1": {}
  },

  // ===== Host Requirements =====
  "hostRequirements": {
    "cpus": 4,
    "memory": "8gb"
  },

  // ===== Container User =====
  "remoteUser": "bun"
}
